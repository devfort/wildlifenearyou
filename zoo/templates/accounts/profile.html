{% extends "base.html" %}

{% load favourites_extras %}

{% block title %}{{ profile.user }}{% endblock %}

{% block content %}

<h1>{{ profile.user }}</h1>

{% for photo in profile.user.photos.all %}
<a href="{{ photo.urls.absolute }}" title="{{ photo.title }}">{{ photo.photo.thumbnail_tag }}</a>
{% endfor %}
<p><a href="{% url upload-photos %}">Upload a photo!</a></p>
<p><a href="{% url logbook-default %}">My Logbook</a></p>

<div id="animal_passport">
	<h2>Animal Passport</h2>
	<ol>
	{% for species in profile.passport.seen_species %}
		<li>{{ species.count }}&times; <a href="{{ species.urls.absolute }}">{{ species }}</a></li>
	{% endfor %}
	</ol>
</div>

<div id="my_trips">
	<h2>My Trips</h2>
	<ol>
	{% for trip in profile.user.created_trip_set.all %}
		<li>
			<p>During your trip to <a href="{{ trip.place.urls.absolute }}">{{ trip.place.known_as }}</a> on {{ trip.start|date:"jS F Y" }} you saw</p>
			<ul>
			{% for species in trip.sightings.all %}
				<li><a href="{{ species.urls.absolute }}">{{ species.common_name }}</a></li>
			{% endfor %}
			</ul>
		</li>
	{% endfor %}
	</ol>
</div>

<div id="favourite_species">
  <h2>Favourite Animals</h2>
  <ol>
    {% for favourite in request.user.favourite_species.all %}
    <li><a href="{{ favourite.species.urls.absolute }}">{{ favourite.species }}</a>
      {% favourite_toggler "remove" favourite.species.slug request.path  %}
    </li>
    {% endfor %}
  </ol>
</div>


{% if user.comment_comments.all %}
<h2>Comments I have posted:</h2>
{% for comment in user.comment_comments.all %}
<div class="comment">
{{ comment.comment|linebreaks }}
<div class="posted-by">Posted on <a href="{{ comment.content_object.urls.absolute }}#c{{ comment.id }}">{{ comment.content_object }}</a> at {{ comment.submit_date|date:"jS F Y H:i" }}</div>
</div>
{% endfor %}
{% endif %}


{% endblock %}
