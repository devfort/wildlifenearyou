package com.supereveildevfort.nov2008.profilepicture {	import com.supereveildevfort.nov2008.profilepicture.controllers.TabWindowController;		import com.supereveildevfort.nov2008.profilepicture.data.ProfileImageData;		import com.niquimerret.events.InteractionEvent;		import com.supereveildevfort.nov2008.profilepicture.ui.buttons.SaveButton;		import com.supereveildevfort.nov2008.profilepicture.ui.PictureDisplay;		import com.supereveildevfort.nov2008.profilepicture.events.ElementEvent;		import flash.events.Event;			import com.supereveildevfort.nov2008.profilepicture.data.ImageData;			import br.com.stimuli.loading.BulkErrorEvent;		import br.com.stimuli.loading.BulkProgressEvent;		import br.com.stimuli.loading.BulkLoader;			import flash.display.MovieClip; 		/**	 * @class AppController.as	 * @namespace com.supereveildevfort.nov2008.profilepicture	 * @author Niqui Merret	 * @version 1.0	 * @date Nov 24, 2008	 * @description	 * @usage	 * NOTE:	 * TODO:	 *	 */	public class AppController extends MovieClip 	{		private var mBulkLoader : BulkLoader;		private var mTabs : TabWindowController;		private var mPictureDisplay : PictureDisplay;		private var mSaveButton : SaveButton;		public function AppController()		{			mBulkLoader = new BulkLoader("ain");            mBulkLoader.add("http://10.0.1.5:8000/faces/profile-images.xml");        	mBulkLoader.addEventListener(BulkProgressEvent.COMPLETE, onAllItemsLoaded);        	mBulkLoader.addEventListener(BulkErrorEvent.ERROR, onLoadError);    		mBulkLoader.start();		}				private function onAllItemsLoaded (e : BulkProgressEvent) : void		{			var imageXML : XML = mBulkLoader.getXML("http://10.0.1.5:8000/faces/profile-images.xml");			ImageData.getInstance().parseXML(imageXML);			ImageData.getInstance().addEventListener(Event.COMPLETE, onLoadingComplete);		}				private function onLoadingComplete (e : Event) : void		{			mPictureDisplay = new PictureDisplay();			addChild(mPictureDisplay);			mPictureDisplay.x = 10;			mPictureDisplay.y = 40;									mTabs = new TabWindowController(ImageData.getInstance().profileImages);			addChild(mTabs);			//mTabs.addEventListener()						mTabs.y = mPictureDisplay.y + mPictureDisplay.height + 10;			mTabs.x = 10;			mTabs.addEventListener(ElementEvent.FACEPART_SELECTED, onItemSelected);						mSaveButton = new SaveButton("Save");			addChild(mSaveButton);			mSaveButton.addEventListener(InteractionEvent.CLICKED, onSave);			mSaveButton.x = mPictureDisplay.width + 20;			mSaveButton.y = mPictureDisplay.height - 20;					}		private function onSave (e : InteractionEvent) : void		{			ProfileImageData.getInstance().saveImage(mPictureDisplay.userImage);		}		private function onItemSelected (event : ElementEvent) : void		{			mPictureDisplay.element = event.facePart;		}		private function onLoadError (event : BulkErrorEvent) : void		{		}	}}